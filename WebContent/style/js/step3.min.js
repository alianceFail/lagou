function img_check(a, b, c, d, e, f, g, h, i, j, k) {
    var l = $("#" + j).val();
    var m = "http://localhost:8088"
    a = $("#" + f),
    this.AllowExt = ".jpg,.gif,.jpeg,.png,.pjpeg",
    this.FileExt = a.val().substr(a.val().lastIndexOf(".")).toLowerCase(),
    0 != this.AllowExt && -1 == this.AllowExt.indexOf(this.FileExt) ? $("#" + g).text("只支持jpg、gif、png、jpeg格式，请重新上传").show() : ($("#" + g).text("").hide(), $.ajaxFileUpload({
        url: b,
        secureuri: false,
        fileElementId: f,
//        data: {
//            type: l,
//        },
        dataType: "json",
        success: function(a) {
        	var b=a.img;
            "" != a ? ($("#" + k).val(b), $("#" + i + " img").attr("src", m+b), $("#" + h).hide(), $("#" + i).show()) : $("#" + g).text("上传失败，请重新上传").show()
        },
        error: function() {
            $("#" + g).text("上传失败，请重新上传").show()
        }
    }))
}
$(function() {
	$("#addMember").click(function() {
        var a = $(".formWrapper").length,
        b = $("#companyId").val();
        2 == a && $(this).hide(),
        $("#memberDiv").append('<div class="formWrapper"><input type="hidden" name="leaderInfos' + a + 'companyId" value="' + b + '" />' + '<div class="new_portrait">' + '<div id="portraitNo' + a + '" class="portrait_upload">' + "<span>上传创始人头像</span>" + "</div>" + '<div  id="portraitShow' + a + '" class="portraitShow dn">' + '<img src="" width="120" height="120" />' + "<span>更换头像</span>" + "</div>" + '<input type="file" class="myfiles" id="myfiles' + a + '" name="file" onchange="img_check(this,\'' + "founderupload',120,120,5,'myfiles" + a + "','myfiles" + a + "_error','portraitNo" + a + "','portraitShow" + a + "','type" + a + "','leaderInfos" + a + '\');" title="支持jpg、jpeg、gif、png格式，文件小于5M" />' + '<input type="hidden" id="type' + a + '" name="type' + a + '" value="7" />' + '<input type="hidden" id="leaderInfos' + a + '" name="leaderInfos' + a + 'photo" />' + '<em>  尺寸：120*120px <br />  大小：小于5M</em><span class="error" id="myfiles' + a + '_error" style="display:none;"></span></div>' + "<h3>创始人姓名</h3>" + '<input type="text" class="s_input1" id="name' + a + '" name="leaderInfos' + a + 'name" placeholder="请输入创始人姓名" />' + "<h3>当前职位</h3>" + '<input type="text" class="s_input1" id="position' + a + '" name="leaderInfos' + a + 'position" placeholder="请输入当前职位，如：创始人兼CEO" />' + "<h3>新浪微博</h3>" + '<input type="text" id="weibo' + a + '" name="leaderInfos' + a + 'weibo" placeholder="请输入新浪微博地址" />' + "<h3>创始人简介</h3>" + '<textarea class="s_textarea" id="description' + a + '" name="leaderInfos' + a + 'remark" maxlength="1000" placeholder="请输入该创始人的个人履历等，建议按照时间倒序分条展示"></textarea>' + '<div class="word_count">你还可以输入 <span>500</span> 字</div>' + "</div>"),
        $(".formWrapper").each(function(b) {
            b != a && $(this).css({
                borderBottom: "1px solid #555",
                paddingBottom: "20px"
            })
        })
    }),
    $("#memberDiv").on("keyup", "textarea",
    function() {
        var a = $(this);
        a.val().length > 500 ? a.val(a.val().substring(0, 500)) : a.siblings(".word_count").children("span").text(500 - a.val().length)
    }),
    $("#memberForm").on("mouseenter", ".new_portrait input",
    function() {
        $(".portrait_upload").css("backgroundColor", "#7e9597")
    }),
    $("#memberForm").on("mouseleave", ".new_portrait input",
    function() {
        $(".portrait_upload").css("backgroundColor", "#e7e7e7")
    }),
    $("#memberForm").validate({
        onkeyup: !1,
        focusCleanup: !0,
        rules: {
            "leaderInfos0name": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                minlength: 2,
                maxlenStr: 20
            },
            "leaderInfos0position": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                maxlenStr: 60
            },
            "leaderInfos0weibo": {
                required: !1,
                checkUrlNot: !0,
                maxlength: 120
            },
            "leaderInfos0remark": {
                required: !1,
                checkNum: !0,
                minlength: 10,
                maxlength: 500
            },
            "leaderInfos1name": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                minlength: 2,
                maxlenStr: 20
            },
            "leaderInfos1position": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                maxlenStr: 60
            },
            "leaderInfos1weibo": {
                required: !1,
                checkUrl: !0,
                maxlength: 120
            },
            "leaderInfos1remark": {
                required: !1,
                checkNum: !0,
                minlength: 10,
                maxlength: 500
            },
            "leaderInfos2name": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                minlength: 2,
                maxlenStr: 20
            },
            "leaderInfos2position": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                maxlenStr: 60
            },
            "leaderInfos2weibo": {
                required: !1,
                checkUrlNot: !0,
                maxlength: 120
            },
            "leaderInfos2remark": {
                required: !1,
                checkNum: !0,
                minlength: 10,
                maxlength: 500
            }
        },
        messages: {
            "leaderInfos0name": {
                specialchar: "请输入真实的创始人姓名",
                checkNum: "请输入真实的创始人姓名",
                minlength: "请输入真实的创始人姓名",
                maxlenStr: "请输入真实的创始人姓名"
            },
            "leaderInfos0position": {
                specialchar: "请输入真实的当前职位",
                checkNum: "请输入真实的当前职位",
                maxlenStr: "请输入真实的当前职位"
            },
            "leaderInfos0weibo": {
                checkUrlNot: "请输入真实的新浪微博地址",
                maxlength: "请输入120字符以内的网址"
            },
            "leaderInfos0remark": {
                checkNum: "请输入有效的个人简介",
                minlength: "请输入10-500字的个人简介",
                maxlength: "请输入10-500字的个人简介"
            },
            "leaderInfos1name": {
                specialchar: "请输入真实的创始人姓名",
                checkNum: "请输入真实的创始人姓名",
                minlength: "请输入真实的创始人姓名",
                maxlenStr: "请输入真实的创始人姓名"
            },
            "leaderInfos1position": {
                specialchar: "请输入真实的当前职位",
                checkNum: "请输入真实的当前职位",
                maxlenStr: "请输入真实的当前职位"
            },
            "leaderInfos1weibo": {
                checkUrlNot: "请输入真实的新浪微博地址",
                maxlength: "请输入120字符以内的网址"
            },
            "leaderInfos1remark": {
                checkNum: "请输入有效的个人简介",
                minlength: "请输入10-500字的个人简介",
                maxlength: "请输入10-500字的个人简介"
            },
            "leaderInfos2name": {
                specialchar: "请输入真实的创始人姓名",
                checkNum: "请输入真实的创始人姓名",
                minlength: "请输入真实的创始人姓名",
                maxlenStr: "请输入真实的创始人姓名"
            },
            "leaderInfos2position": {
                specialchar: "请输入真实的当前职位",
                checkNum: "请输入真实的当前职位",
                maxlenStr: "请输入真实的当前职位"
            },
            "leaderInfos2weibo": {
                checkUrlNot: "请输入真实的新浪微博地址",
                maxlength: "请输入120字符以内的网址"
            },
            "leaderInfos2remark": {
                checkNum: "请输入有效的个人简介",
                minlength: "请输入10-500字的个人简介",
                maxlength: "请输入10-500字的个人简介"
            }
        },
        submitHandler: function(a) {
            var b = $(a).find('input[type="text"]'),
            c = $(a).find("textarea");
            b.each(function() {
                $(this).val() == $(this).attr("placeholder") && $(this).val("")
            }),
            c.each(function() {
                $(this).text() == $(this).attr("placeholder") && $(this).text("")
            }),
            $(a).find(":submit").attr("disabled", !0),
            a.submit()
        }
    })
});